<!DOCTYPE html>
<html lang="en">
<head>
    <title>Admin Page</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->
<link rel="icon" type="image/png" href="images/icons/favicon.png"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/themify/themify-icons.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/Linearicons-Free-v1.0.0/icon-font.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/elegant-font/html-css/style.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/slick/slick.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
<!--===============================================================================================-->

</head>
<body class="animsition" onload = onLoad()>



		<!-- top noti -->
		<div class="flex-c-m size22 bg0 s-text21 pos-relative">
				<!-- Point to Point Communication -->
        </div>
        

	<!-- Header -->
	<header class="header1">
	
			<div class="wrap_header">
				<!-- Logo -->
				<a href="index.html" class="logo">
					<img src="images/icons/logo.png" alt="IMG-LOGO">
				</a>

				<!-- Menu -->
				<div class="wrap_menu">
                        <nav class="menu">
                            <ul class="main_menu">
                                <li>
                                    <a href="index.html">Home</a>
                                </li>
                                
                                <!--DOESNT WORK FOR SHOW-->
                                <li>
                                    <a href="#">Shop</a>
                                </li>
                                <li>
                                    <a href="#">About</a>
                                </li>
    
                                <li>
                                    <a href="#">Contact</a>
                                </li>
                            </ul>
                        </nav>
                    </div>

                   
                    <!--Menu End-->

        <div class="header-icons">
                <a href="#" class="header-wrapicon1 dis-block">
                    <img src="images/icons/icon-header-01.png" class="header-icon1" alt="ICON">
                </a>

                <div class="header-wrapicon2">
                    <img src="images/icons/icon-header-02.png" class="header-icon1 js-show-header-dropdown" alt="ICON">
                    <span class="header-icons-noti">0</span>
                </div>
        </div>
            <!--Header Icon End-->

        </div>
    <br>
    <br>

        	<!-- Category we choose that will populate upon clicking  -->
	<section class="bgwhite p-t-45 p-b-58">

        
            <div class="container">
                <div class="sec-title p-b-22">
                    <h3 class="m-text5 t-center approvalList">
                        Products to be approved
                    </h3>
                </div>
        
    </section>


 

  
			<!-- Default form contact -->
			<div class="container" >
						<table class="table table-striped table-bordered">
							<tbody>
								<tr>
									<th style="text-align:center" scope="row" width="50%">Product Name</th>
									<td style="text-align:center" class="pname"></td>									
								</tr>
								<tr>
									<th style="text-align:center" scope="row" width="50%">Company Name</th>
									<td style="text-align:center" class = "cname"></td>									
								</tr>
								<tr>
									<th style="text-align:center" scope="row" width="50%">Category</th>
									<td style="text-align:center" class = "cat"></td>									
								</tr>
								<tr>
									<th style="text-align:center" scope="row" width="50%">Maximum Quantity</th>
									<td style="text-align:center" class ="maxq"></td>								
								</tr>
								<tr>
									<th style="text-align:center" scope="row" width="50%">Minimum Quantity</th>
									<td style="text-align:center" class="minq"></td>									
								</tr>
								<tr>
									<th style="text-align:center" scope="row" width="50%">Group Buy Criteria</th>
									<td style="text-align:center" class="gbc"></td>									
								</tr>
								<tr>
									<th style="text-align:center" scope="row" width="50%">Promotion Description</th>
									<td style="text-align:center" class="promod"></td>									
								</tr>
								<tr>
									<th style="text-align:center" scope="row" width="50%">Image</th>
									<td style="text-align:center" class="image"></td>									
                                </tr>
                                <tr>
                                    <th style="text-align:center" scope="row" width="50%">New Price</th>
                                    <td style="text-align:center" class="newp"></td>									
                                </tr>
                                <tr>
                                    <th style="text-align:center" scope="row" width="50%">Old Price</th>
                                    <td style="text-align:center" class="oldp"></td>									
                                    </tr>
               

							</tbody>
						</table>
			
			<br>

                    <!-- Approve button -->
                    <button class="flex-c-m size2 bg4 bo-rad-23 hov1 m-text3 trans-0-4" id="approve" type="submit">
						Approve</button>

					<br>	
					
					<!-- Reject button -->
                    <button class="flex-c-m size2 bg4 bo-rad-23 hov1 m-text3 trans-0-4" id="reject" type="submit">
                        Reject</button>

                        <br>

                        <button class="flex-c-m size2 bg4 bo-rad-23 hov1 m-text3 trans-0-4" id="groupbuy" type="submit">
                        Send Groupbuy Orders</button>
                          
            </div>
            <script>
                
                document.querySelector("#groupbuy").addEventListener("click", (e) => {
                    console.log('HI')
                    $.get('https://esdg6t5-eval-test.apigee.net/resource');
                    swal({
                            title : "Confirmation Sent!",
                            text : "Group buy confirmations have been sent!",
                            icon: "success",
                            button : "Ok"
                        });

                        e.preventDefault();

                })

               
                
                </script>
            <script>
                    document.querySelector("#approve").addEventListener("click",()=> {
                        console.log(window.data);
                        $.ajax({
                            type: "POST",
                            url : 'http://localhost:8030/approveoffer',
                            data : JSON.stringify(window.data),
                            success: console.log("success!"),
                            error: console.log("failure!") ,
                            headers: {                              
                                'Content-Type': 'application/json'  
                            }                 ,
                            
                            dataType: "json"
                        });
                        document.location.reload();
                    }
                    );


                    document.querySelector("#reject").addEventListener("click",()=> {
                        document.location.reload();
                        }
                    );

                    function onLoad() {
                        $.get('http://localhost:8030/retrieveoffers' ,
                        function (data) {
                             
                            
                            data = JSON.parse(data);
                            document.querySelector(".pname").innerHTML = data.product_name;
                            document.querySelector(".cname").innerHTML = data.company_name;
                            document.querySelector(".cat").innerHTML = data.category;
                            document.querySelector(".maxq").innerHTML = data.max_quantity;
                            document.querySelector(".minq").innerHTML = data.min_quantity;
                            document.querySelector(".gbc").innerHTML = data.groupbuy_criteria;
                            document.querySelector(".promod").innerHTML = data.promo_description;
                            document.querySelector(".image").innerHTML = data.image_url;
                            document.querySelector(".newp").innerHTML = data.new_price;
                            document.querySelector(".oldp").innerHTML = data.old_price;


                            var start_date = new Date().toISOString().slice(0, 19);
                            data1 = {
                                "promotion_id": 0,
                                "product_name": data.product_name,
                                "company_name": data.company_name,
                                "category": data.category,
                                "start_datetime": start_date,
                                "end_datetime": "2020-04-03T22:20:15.413Z",
                                "max_quantity": data.max_quantity,
                                "quantity_left": 0,
                                "current_buyers": 0,
                                "groupbuy_criteria": data.groupbuy_criteria,
                                "offer": 0,
                                "status": "open ",
                                "promo_description": data.promo_description,
                                "renew": "string",
                                "customer_buy": 0,
                                "image_url": "123",
                                "old_price": data.old_price,
                                "new_price": data.new_price
                              }
                              console.log(data1);
                              window.data = data1;
                        
                    }) }

            </script>

        </section>
        
                <div class="t-center p-l-15 p-r-15">        
                    <div class="t-center s-text8 p-t-20">
                        Copyright © 2019 All rights reserved | G4T5
                    </div>
                </div>
            </footer>
        
            <!-- Back to top -->
            <div class="btn-back-to-top bg0-hov" id="myBtn">
                <span class="symbol-btn-back-to-top">
                    <i class="fa fa-angle-double-up" aria-hidden="true"></i>
                </span>
            </div>
        
        <!--===============================================================================================-->
            <script type="text/javascript" src="vendor/jquery/jquery-3.2.1.min.js"></script>
        <!--===============================================================================================-->
            <script type="text/javascript" src="vendor/animsition/js/animsition.min.js"></script>
        <!--===============================================================================================-->
            <script type="text/javascript" src="vendor/bootstrap/js/popper.js"></script>
            <script type="text/javascript" src="vendor/bootstrap/js/bootstrap.min.js"></script>
        <!--===============================================================================================-->
            <script type="text/javascript" src="vendor/select2/select2.min.js"></script>
            <script type="text/javascript">
                $(".selection-1").select2({
                    minimumResultsForSearch: 20,
                    dropdownParent: $('#dropDownSelect1')
                });
            </script>
        <!--===============================================================================================-->
            <script type="text/javascript" src="vendor/slick/slick.min.js"></script>
            <script type="text/javascript" src="js/slick-custom.js"></script>
        <!--===============================================================================================-->
            <script type="text/javascript" src="vendor/countdowntime/countdowntime.js"></script>
        <!--===============================================================================================-->
            <script type="text/javascript" src="vendor/sweetalert/sweetalert.min.js"></script>

    <!--===============================================================================================-->
	    <script type="text/javascript" src="vendor/jquery/jquery-3.2.1.min.js"></script>
    <!--===============================================================================================-->
        <script type="text/javascript" src="vendor/animsition/js/animsition.min.js"></script>
    <!--===============================================================================================-->
        <script type="text/javascript" src="vendor/bootstrap/js/popper.js"></script>
        <script type="text/javascript" src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <!--===============================================================================================-->
        <script type="text/javascript" src="vendor/select2/select2.min.js"></script>

        <script type="text/javascript">
            $(".selection-1").select2({
                minimumResultsForSearch: 20,
                dropdownParent: $('#dropDownSelect1')
            });
		</script>
		
    <!--===============================================================================================-->
        <script type="text/javascript" src="vendor/slick/slick.min.js"></script>
        <script type="text/javascript" src="js/slick-custom.js"></script>
    <!--===============================================================================================-->
        <script type="text/javascript" src="vendor/countdowntime/countdowntime.js"></script>
    <!--===============================================================================================-->
        <script type="text/javascript" src="vendor/sweetalert/sweetalert.min.js"></script>
    
<!--===============================================================================================-->
        <script src="js/main.js"></script>


        
</body>
</html>
